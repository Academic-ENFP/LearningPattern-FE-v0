(()=>{function e(e){var t=null;if(document.cookie&&""!==document.cookie)for(var i=document.cookie.split(";"),o=0;o<i.length;o++){var r=i[o].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}function t(t){return e(t)}function i(t,i){var o=e("csrftoken");fetch("http://127.0.0.1:8000/api/lecture/",{method:"POST",body:JSON.stringify({video_id:i,name:"temp",degree:null,complet_date:null,lecture_time:null,learning_time:null,state:"ongoing",subject:"temp"}),headers:{"Content-Type":"application/json","X-CSRFToken":o,Authorization:"Bearer ".concat(t)}}),function(e){var t=document.querySelector("#lecmind_container"),i=document.querySelector("#lecmind_layer"),o=document.createElement("div"),r=document.createElement("img");for(o.setAttribute("id","loading_panel"),o.style.position="absolute",o.style.backgroundColor="white",o.style.width="300px",o.style.height="50px",o.style.borderRadius="20px",o.style.top=window.innerHeight/2-250+"px",o.style.left=window.innerWidth/2-150+"px",o.style.boxShadow="2px 3px 5px 0px",o.style.textAlign="center",o.innerHTML+='<div id="guide_text" style="margin-top: 15px;"><h2>잠시만 기다려주세요!</h2></div>',r.setAttribute("src","https://drive.google.com/uc?export=download&id=1XCngqyGNxZVrFzSw0mxM8yIEpIqJry6L"),r.style.position="relative",r.style.marginTop="60px";i.hasChildNodes();)i.removeChild(i.firstChild);o.appendChild(r),i.appendChild(o),i.style.backgroundColor="white",setTimeout((function(){var o=document.createElement("iframe");o.setAttribute("src","http://127.0.0.1:8000/learning/".concat(e)),o.style.setProperty("position","absolute","important"),o.style.setProperty("top","50%","important"),o.style.setProperty("left","50%","important"),o.style.setProperty("transform","translate(-50%, -50%)","important"),o.style.setProperty("width","100%","important"),o.style.setProperty("height","100%","important"),o.style.setProperty("backgroundColor","rgb(0, 0, 0)","important"),o.style.setProperty("boxShadow","rgba(0, 0, 0, 0.176) 0px 1rem 3rem","important"),o.style.setProperty("display","flex","important"),o.style.setProperty("borderWidth","0px","important"),o.style.setProperty("overflow","hidden","important");var r=document.createElement("img");r.setAttribute("id","lecmind_viewer_close_btn"),r.setAttribute("src","https://drive.google.com/uc?export=download&id=1-bssq5ahdNM23fhGwjM57Pf-njJL4Usc"),r.style.cursor="pointer",r.style.width="25px",r.style.display="inline",r.style.setProperty("margin-right","0.3rem","important"),r.onclick=function(){document.body.querySelector("#lecmind_container").remove()};var n=document.createElement("img");n.setAttribute("id","lecmind_viewer_screen_btn"),n.setAttribute("src","https://drive.google.com/uc?export=download&id=1qPnjOOudToH6TsMVqPGxk53Mg0A7f-tm"),n.style.cursor="pointer",n.style.width="25px",n.style.display="inline",n.style.setProperty("margin-right","0.3rem","important"),n.onclick=function(){window.screenTop||window.screenY?(document.querySelector("#lecmind_viewer_screen_btn").setAttribute("src","https://drive.google.com/uc?export=download&id=1gQPdfX2cmuaTdCNS-yP1-WUUr0_DRTMG"),document.documentElement.requestFullscreen()):(document.querySelector("#lecmind_viewer_screen_btn").setAttribute("src","https://drive.google.com/uc?export=download&id=1qPnjOOudToH6TsMVqPGxk53Mg0A7f-tm"),document.exitFullscreen())};var l=document.createElement("img");l.setAttribute("id","lecmind_viewer_show_btn"),l.setAttribute("src","https://drive.google.com/uc?export=download&id=16EedLOxEhzJi_KDW8UpN1ZynwG0sF4mF"),l.style.cursor="pointer",l.style.width="25px",l.style.display="inline",l.onclick=function(){""==document.body.querySelector("#lecmind_layer").style.display?(document.querySelector("#lecmind_viewer_show_btn").setAttribute("src","https://drive.google.com/uc?export=download&id=1iRUkQwKOva6Pe11gBNAw_gfdkA0NhIVb"),document.body.querySelector("#lecmind_layer").style.display="none"):(document.querySelector("#lecmind_viewer_show_btn").setAttribute("src","https://drive.google.com/uc?export=download&id=16EedLOxEhzJi_KDW8UpN1ZynwG0sF4mF"),document.body.querySelector("#lecmind_layer").style.display="")};var d=document.createElement("div");for(d.setAttribute("id","lecmind_viewer_controller"),d.style.zIndex=2147483647,d.style.position="fixed",d.style.top="20px",d.style.left="20px",d.style.boxShadow="rgba(0, 0, 0, 0.15) 0px 0.5rem 1rem",d.style.backgroundColor="rgb(65, 65, 65)",d.style.borderRadius="5px",d.style.setProperty("padding","0.5rem","important"),d.appendChild(r),d.appendChild(n),d.appendChild(l);i.hasChildNodes();)i.removeChild(i.firstChild);t.appendChild(d),i.appendChild(o)}),3e3)}(i)}function o(e){if(videos=document.getElementsByTagName("video"),0!=videos.length){var t=videos[0].getBoundingClientRect(),i=(t.top,t.left),o=t.width,r=t.height,n=document.createElement("img");n.setAttribute("id","lecmind_video_layer"),n.setAttribute("src","https://png.pngtree.com/background/20210714/original/pngtree-dark-blue-solid-color-background-wallpaper-picture-image_1219002.jpg"),n.style.width=t.width+"px",n.style.height=t.height+"px",n.style.opacity="0.4";var l=document.createElement("img");l.style.position="absolute",l.style.top=t.height/2-64+"px",l.style.left=t.width/2-64+"px",l.style.cursor="pointer",l.setAttribute("id","lecmind_video_btn"),l.setAttribute("src","https://cdn-icons-png.flaticon.com/128/149/149125.png"),l.onclick=function(t){return chrome.runtime.sendMessage({type:"setLecture",token:e},(function(e){console.log("setLecture")}))};var d=document.createElement("div");d.setAttribute("id","lecmind_guide_panel"),d.style.position="absolute",d.style.backgroundColor="white",d.style.width="300px",d.style.height="50px",d.style.borderRadius="20px",d.style.top="400px",d.style.left=document.body.clientWidth/2-150+"px",d.style.boxShadow="2px 3px 5px 0px",d.style.textAlign="center",d.innerHTML+='<div id="guide_text" style="margin-top: 15px;"><h2>수강할 영상을 선택해주세요!</h2></div>';var s=document.createElement("div");s.setAttribute("id","lecmind_guide_container"),s.style.top=t.top+"px",s.style.left=i+"px",s.style.width=o+"px",s.style.height=r+"px",s.style.position="absolute",s.style.display="flex",s.style.justifyContent="center",s.style.alignItems="center";var c=document.createElement("div");c.setAttribute("id","lecmind_layer"),c.style.zIndex=2147483644,c.style.position="fixed",c.style.top="0px",c.style.left="0px",c.style.width="100vw",c.style.height="100vh",c.style.backgroundColor="rgba(206, 212, 218, 0.5)",c.style.cursor="not-allowed";var p=document.createElement("div");p.setAttribute("id","lecmind_container"),s.appendChild(n),s.appendChild(l),s.appendChild(d),c.appendChild(s),p.appendChild(c),document.body.appendChild(p)}}chrome.runtime.onMessage.addListener((function(e,r,n){return chrome.tabs.query({currentWindow:!0,active:!0},(function(r){var l=r[0].id;if("selectVideo"===e.type){n({work:"welcome!"});var d=e.token;chrome.scripting.executeScript({target:{tabId:l},func:o,args:[d]})}else if("setLecture"===e.type){n({work:"welcome!"}),d=e.token;var s=r[0].url.split("=")[1];chrome.scripting.executeScript({target:{tabId:l},func:i,args:[d,s]})}else"getSession"===e.type&&chrome.scripting.executeScript({target:{tabId:l},func:t,args:["sessionid"]},(function(e){n({value:e})}))})),!0}))})();