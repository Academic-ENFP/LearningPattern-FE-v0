(()=>{var e="";function t(e){fetch("http://127.0.0.1:8000/api/lecture/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({video_id:e,name:"temp",degree:"",complet_date:"",lecture_time:"",learning_time:"",state:"",subject:"temp"})}).then((function(e){e.ok&&alert("생성이 완료되었습니다.")}))}function i(){if(videos=document.getElementsByTagName("video"),0!=videos.length){var e=videos[0].getBoundingClientRect(),t=(e.top,e.left),i=e.width,o=e.height,n=document.createElement("div");n.setAttribute("id","lecmind_appended"),n.style.top=e.top+"px",n.style.left=t+"px",n.style.width=i+"px",n.style.height=o+"px",n.style.zIndex=2147483646,n.style.position="absolute",n.style.display="flex",n.style.justifyContent="center",n.style.alignItems="center",n.innerHTML+='<div id="lecture_layer"><img id="lecmind_layout" src="https://png.pngtree.com/background/20210714/original/pngtree-dark-blue-solid-color-background-wallpaper-picture-image_1219002.jpg" class="lecture_play_img" /></div>',document.body.appendChild(n);var l=document.querySelector("#lecmind_layout");l.style.width=e.width+"px",l.style.height=e.height+"px",l.style.opacity="0.4";var r=document.createElement("div");r.setAttribute("id","guide_textbox"),r.style.position="absolute",r.style.backgroundColor="white",r.style.width="300px",r.style.height="50px",r.style.borderRadius="20px",r.style.top=-n.offsetTop/2+"px",r.style.boxShadow="2px 3px 5px 0px",r.style.textAlign="center",r.innerHTML+='<div id="guide_text" style="margin-top: 15px;"><h2>수강할 영상을 선택해주세요!</h2></div>',n.appendChild(r);var c=document.createElement("div");c.style.position="absolute",c.style.top=n.offsetHeight/4+"px",c.style.left=n.offsetWidth/3+"px",c.innerHTML+='<img id="lecture_select_btn" style="cursor: pointer;" src="https://cdn-icons-png.flaticon.com/128/149/149125.png"/>',document.querySelector("#lecture_layer").appendChild(c),document.querySelector("#lecture_select_btn").onclick=chrome.runtime.sendMessage("setLecture",(function(e){console.log("setLecture")}))}}chrome.runtime.onMessage.addListener((function(o,n,l){return chrome.tabs.query({currentWindow:!0,active:!0},(function(n){"selectVideo"===o?(l({work:"welcome!"}),id=n[0].id,chrome.scripting.executeScript({target:{tabId:id},func:i})):"setLecture"===o?(l({work:"welcome!"}),id=n[0].id,url=n[0].url,video_id=url.split("=")[1],chrome.scripting.executeScript({target:{tabId:id},func:t,args:[video_id]})):"token"===o.type?(l({work:"welcome!"}),e=o.value,console.log(e)):"getToken"===o&&l(e)})),!0}))})();